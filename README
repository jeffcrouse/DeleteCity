Delete City
By Jeff Crouse
jefftimesten at gmail dot com
http://www.jeffcrouse.info
 
This software is licensed under the GNU-GPL version 3 or later.

Delete City is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either
version 3 of the License, or (at your option) any later version.

Delete City is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.


INTRODUCTION
=========================


Delete City uses the ridiculous storage allotment of web hosting services like Dreamhost to cache large amounts of user generated content from sites like YouTube, Flickr, Facebook, etc. and then monitors to see if any of this content is subsequently taken down. When it finds removed content, it automatically posts the content to your WordPress blog. The nature of the content can be customized by the user by site, keyword, and other criteria. Devious? Maybe. But also one step in the fight against censorship.

more info:
http://www.jeffcrouse.info/projects/delete-city/


INSTALL
=======================
To install the plugin in your Wordpress, try this:

cd [wordpress root]/wp-content/plugins
git clone --recursive https://github.com/jefftimesten/DeleteCity.git


REQUIREMENTS
=========================

*nix only!  I use a bunch of system commands that I don't know how to translate into Windows.  I'd love someone to help me, though!

PHP >= 5 (may be compatible with PHP4, according to http://phpduck.com/minimum-php-version-script/)
Python >= 2.5


IMPORTANT FOLDERS AND FILES
=========================

deletecity.php
The Wordpress plugin

sources
This file contains feed URLS (one per line) that will be used to find the videos to download.  Check out this page for more information about forming feed URLS: http://code.google.com/apis/youtube/2.0/reference.html#Searching_for_videos

runcache.php 
This script will download videos into the $cache_dir.  eg: ./runcache.php
eg: ./runcache.php

config.php
Some configuration options.  Most of them are commented and should be pretty self explainatory.  


OTHER FILES
========================

youtube-dl
This is a 3rd party script for downloading YouTube videos. You probably shouldn't use this directly - it is called from the other scripts.  You can find out more about it here:  http://rg3.github.com/youtube-dl/

NOTE:  If you are getting this from Github, make sure to properly initialize this submodule


TO DO
=========================
1. add proxy.conf -- a list of proxies to use randomly IF youtube-dl starts returning errors

2. Testing if video had been removed: testing for presence of <?xml in response probably isn't good enough.  Here are some removed videos to test with.
http://www.youtube.com/watch?v=eouvTRd6szQ 				account terminated
http://www.youtube.com/watch?v=PgEo_7rMH0Q				account terminated
http://www.youtube.com/watch?v=JdGJxI6LrX4				removed by user
http://www.youtube.com/watch?v=vQsFI4Wp6kI				removed by user

3. Make a schedule.php, or something to deal with scheduling the scripts to run automatically.

4. Save video description, and other attributed of the video from the feed.

5. Option to automatically email the video author to ask why the video was taken down :)

6. Batch query in check.php?

7. If an orphan file is encountered that has been removed from YouTube, it will never get inserted into the database because we can't fetch info for it.  Need a better solution for this, or maybe it is just unavoidable.  Maybe the solution is to just save http://gdata.youtube.com/feeds/api/videos/{$this->youtube_id} as an XML file in the cache directory?  That is a lot of redundant information: you have stuff in the database and in the XML files.  

8. Check should make an RSS feed.

9. Wordpress plugin shouldn't run cache if it is already running.

10. Catch exceptions from Video class

11. Clean up runcache -- it's messy!